<template>
  <div v-if="viewQueue" class="flex items-center shrink-0">
    <div
      class="flex w-full bg-toyhouse-primary-200 border border-toyhouse-primary-400 rounded-md rounded-r-none relative w-2/3 md:w-5/6 lg:w-5/6 2xl:w-11/12"
    >
      <div class="flex items-center gap-10 overflow-y-auto px-3 py-1">
        <template
          v-if="queue.length > 0"
          v-for="character in queue"
          :key="character.id"
        >
          <Character :data="character" />
        </template>
        <template v-else>
          <h1 class="text-sm md:text-base lg:p-5 2xl:p-10">
            No characters in queue!
          </h1>
        </template>
      </div>
    </div>
    <button
      :class="{ 'cursor-not-allowed': queue.length === 0 }"
      :disabled="queue.length === 0"
      class="self-stretch right-0 bg-toyhouse-button-primary text-white rounded-md rounded-l-none w-1/3 transition duration-300 ease-out hover:bg-toyhouse-button-secondary disabled:bg-toyhouse-button-secondary md:w-1/6 lg:w-1/6 2xl:w-1/12"
      type="button"
      @click="downloadQueue"
    >
      <img :src="DownloadSvg" class="w-6 mx-auto lg:w-7 xl:w-8 text-white" />
    </button>
  </div>
</template>
<script setup lang="ts">
import { useQueueStore } from "@/stores/queue";
import DownloadSvg from "@/assets/download.svg";
import Character from "./QueueCharacter.vue";
import { downloadQueue } from "@/lib/download";
import { storeToRefs } from "pinia";

const queueStore = useQueueStore();
const { queue, viewQueue } = storeToRefs(queueStore);
</script>
